<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zona Total - Recetas y Cocina Premium</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Lora:wght@400;500;600&family=Playfair+Display:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* RESET Y ESTILOS GENERALES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Lora', serif;
            background-color: #0A0A0A;
            color: #FFFFFF;
            line-height: 1.6;
            background-image: linear-gradient(rgba(10,10,10,0.95), rgba(10,10,10,0.95)), url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="100" height="100" patternUnits="userSpaceOnUse"><path d="M 100 0 L 0 0 0 100" fill="none" stroke="%231A1A1A" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
        }
        
        h1, h2, h3, h4 {
            font-family: 'Cinzel', serif;
            font-weight: 600;
            letter-spacing: 1.5px;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* ESTILOS DORADO PREMIUM */
        .gold-text {
            color: #D4AF37;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }
        
        .gold-border {
            border: 1px solid rgba(212, 175, 55, 0.5);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
        }
        
        .gold-bg {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(212, 175, 55, 0.05));
        }
        
        .gold-accent {
            color: #F4E4A6;
        }
        
        .btn-gold {
            background: linear-gradient(135deg, #D4AF37, #B8941F);
            color: #0A0A0A;
            border: none;
            padding: 12px 28px;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            z-index: 1;
            letter-spacing: 1px;
        }
        
        .btn-gold:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
            z-index: -1;
        }
        
        .btn-gold:hover:before {
            left: 100%;
        }
        
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.3);
        }
        
        .btn-gold-outline {
            background: transparent;
            border: 2px solid #D4AF37;
            color: #D4AF37;
            padding: 10px 24px;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-gold-outline:hover {
            background-color: #D4AF37;
            color: #0A0A0A;
        }
        
        /* ENCABEZADO PREMIUM */
        header {
            text-align: center;
            padding: 40px 0 30px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        header:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(212, 175, 55, 0.05) 0%, rgba(10,10,10,0) 70%);
            pointer-events: none;
        }
        
        .logo-premium {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            border: 2px solid #D4AF37;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #D4AF37;
            font-size: 2rem;
            background: rgba(10, 10, 10, 0.8);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .logo-premium img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .logo-premium:after {
            content: '';
            position: absolute;
            width: 110px;
            height: 110px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 50%;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #D4AF37, #F4E4A6, #D4AF37);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            background-size: 200% auto;
            animation: shimmer 3s linear infinite;
        }
        
        @keyframes shimmer {
            to {
                background-position: 200% center;
            }
        }
        
        .subtitle {
            color: #C0C0C0;
            font-size: 1.1rem;
            font-weight: 300;
            font-style: italic;
            letter-spacing: 1px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* MEN√ö DE ADMIN */
        .admin-bar {
            position: fixed;
            top: 0;
            right: 0;
            z-index: 1000;
            padding: 10px 20px;
        }
        
        .btn-admin {
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid #D4AF37;
            color: #D4AF37;
            padding: 8px 16px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 4px;
        }
        
        .btn-admin:hover {
            background: #D4AF37;
            color: #0A0A0A;
        }
        
        /* MEN√ö DE SUBCATEGOR√çAS */
        .menu-categorias {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 50px;
        }
        
        .btn-categoria {
            background-color: transparent;
            border: 2px solid rgba(212, 175, 55, 0.7);
            color: #FFFFFF;
            padding: 12px 24px;
            font-family: 'Cinzel', serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            position: relative;
            overflow: hidden;
            min-width: 140px;
            text-align: center;
        }
        
        .btn-categoria:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
            transition: 0.5s;
        }
        
        .btn-categoria:hover:before {
            left: 100%;
        }
        
        .btn-categoria:hover {
            border-color: #D4AF37;
            color: #D4AF37;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.2);
        }
        
        /* SECCIONES DE CATEGOR√çAS */
        .seccion-categoria {
            margin-bottom: 70px;
            scroll-margin-top: 20px;
        }
        
        .titulo-categoria {
            font-size: 2.2rem;
            margin-bottom: 30px;
            padding-bottom: 10px;
            position: relative;
            text-align: center;
        }
        
        .titulo-categoria:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(to right, transparent, #D4AF37, transparent);
        }
        
        /* GRID DE RECETAS - TARJETAS M√ÅS PEQUE√ëAS */
        .grid-recetas {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .tarjeta-receta {
            background: rgba(20, 20, 20, 0.7);
            border: 1px solid rgba(212, 175, 55, 0.3);
            padding: 20px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            height: 380px;
            display: flex;
            flex-direction: column;
        }
        
        .tarjeta-receta:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: #D4AF37;
            transform: scaleY(0);
            transition: transform 0.4s ease;
        }
        
        .tarjeta-receta:hover:before {
            transform: scaleY(1);
        }
        
        .tarjeta-receta:hover {
            transform: translateY(-8px);
            border-color: rgba(212, 175, 55, 0.7);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }
        
        .imagen-receta {
            width: 100%;
            height: 150px;
            background-color: #1A1A1A;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 14px;
            overflow: hidden;
            border: 1px solid rgba(212, 175, 55, 0.2);
            flex-shrink: 0;
        }
        
        .imagen-receta img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .contenido-receta {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .titulo-receta {
            font-size: 1.4rem;
            margin-bottom: 10px;
            font-family: 'Playfair Display', serif;
            line-height: 1.3;
            flex-shrink: 0;
        }
        
        .descripcion-receta {
            color: #B0B0B0;
            margin-bottom: 15px;
            font-size: 0.95rem;
            line-height: 1.5;
            flex: 1;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
        }
        
        .btn-ver-receta {
            background: transparent;
            border: 1px solid #D4AF37;
            color: #D4AF37;
            padding: 8px 16px;
            font-family: 'Cinzel', serif;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            margin-top: auto;
            flex-shrink: 0;
        }
        
        .btn-ver-receta:hover {
            background-color: #D4AF37;
            color: #0A0A0A;
        }
        
        /* MODAL DE RECETA DETALLADA */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            overflow-y: auto;
            padding: 20px;
        }
        
        .modal-contenido {
            background: rgba(15, 15, 15, 0.95);
            max-width: 900px;
            margin: 30px auto;
            border: 1px solid rgba(212, 175, 55, 0.5);
            padding: 30px;
            position: relative;
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.2);
        }
        
        .cerrar-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            color: #D4AF37;
            font-size: 28px;
            cursor: pointer;
            background: none;
            border: none;
            z-index: 10;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .cerrar-modal:hover {
            background: rgba(212, 175, 55, 0.1);
        }
        
        .imagen-receta-grande {
            width: 100%;
            height: 300px;
            background-color: #1A1A1A;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            border: 1px solid rgba(212, 175, 55, 0.3);
            overflow: hidden;
        }
        
        .imagen-receta-grande img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .detalles-receta {
            display: flex;
            gap: 30px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .detalles-receta > div {
            flex: 1;
            min-width: 300px;
        }
        
        .detalles-receta h3 {
            font-size: 1.6rem;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
        }
        
        .detalles-receta ul, .detalles-receta ol {
            padding-left: 20px;
            color: #C0C0C0;
        }
        
        .detalles-receta li {
            margin-bottom: 10px;
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .info-receta {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            color: #B0B0B0;
            font-style: italic;
            padding: 12px;
            background: rgba(212, 175, 55, 0.05);
            border-left: 3px solid #D4AF37;
            flex-wrap: wrap;
        }
        
        /* LOGIN */
        .login-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            overflow-y: auto;
            padding: 40px 20px;
        }
        
        .login-contenido {
            background: rgba(20, 20, 20, 0.98);
            max-width: 450px;
            margin: 80px auto;
            border: 1px solid rgba(212, 175, 55, 0.5);
            padding: 30px;
            position: relative;
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.2);
            text-align: center;
        }
        
        /* PANEL DE ADMINISTRACI√ìN */
        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            overflow-y: auto;
            padding: 30px 15px;
        }
        
        .admin-contenido {
            background: rgba(20, 20, 20, 0.98);
            max-width: 1100px;
            margin: 0 auto;
            border: 1px solid rgba(212, 175, 55, 0.5);
            padding: 30px;
            position: relative;
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.2);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
        }
        
        .admin-title {
            font-size: 2rem;
        }
        
        .admin-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 25px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            padding-bottom: 8px;
            flex-wrap: wrap;
        }
        
        .admin-tab {
            background: transparent;
            border: none;
            color: #B0B0B0;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Cinzel', serif;
            font-size: 0.95rem;
        }
        
        .admin-tab.active {
            color: #D4AF37;
            border-bottom: 2px solid #D4AF37;
        }
        
        .admin-tab:hover {
            color: #D4AF37;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .admin-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .form-group label {
            color: #D4AF37;
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        .form-control {
            background: rgba(30, 30, 30, 0.8);
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: #FFFFFF;
            padding: 10px 12px;
            font-family: 'Lora', serif;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #D4AF37;
            box-shadow: 0 0 8px rgba(212, 175, 55, 0.2);
        }
        
        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .admin-recetas-list {
            margin-top: 30px;
            max-height: 350px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .admin-receta-item {
            background: rgba(30, 30, 30, 0.7);
            border: 1px solid rgba(212, 175, 55, 0.2);
            padding: 12px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-receta-info h4 {
            margin-bottom: 4px;
            font-size: 1.1rem;
        }
        
        .admin-receta-info small {
            font-size: 0.85rem;
        }
        
        .admin-receta-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-eliminar {
            background: rgba(200, 50, 50, 0.2);
            border: 1px solid rgba(200, 50, 50, 0.5);
            color: #FF6B6B;
            padding: 6px 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
        }
        
        .btn-eliminar:hover {
            background: rgba(200, 50, 50, 0.4);
        }
        
        .btn-editar {
            background: rgba(212, 175, 55, 0.2);
            border: 1px solid rgba(212, 175, 55, 0.5);
            color: #D4AF37;
            padding: 6px 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
        }
        
        .btn-editar:hover {
            background: rgba(212, 175, 55, 0.4);
        }
        
        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        .file-upload input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-upload-label {
            display: block;
            padding: 10px 12px;
            background: rgba(30, 30, 30, 0.8);
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: #B0B0B0;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .file-upload-label:hover {
            border-color: #D4AF37;
            color: #D4AF37;
        }
        
        .imagen-preview {
            width: 100%;
            max-height: 150px;
            object-fit: contain;
            margin-top: 8px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            display: none;
        }
        
        .configuracion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .config-item {
            background: rgba(30, 30, 30, 0.7);
            border: 1px solid rgba(212, 175, 55, 0.2);
            padding: 15px;
        }
        
        /* PIE DE P√ÅGINA */
        footer {
            text-align: center;
            padding: 30px 0;
            border-top: 1px solid rgba(212, 175, 55, 0.3);
            margin-top: 50px;
            color: #888;
            font-size: 0.9rem;
            position: relative;
        }
        
        footer:before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 1px;
            background: linear-gradient(to right, transparent, #D4AF37, transparent);
        }
        
        /* RESPONSIVE */
        @media (max-width: 992px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .menu-categorias {
                gap: 12px;
            }
            
            .btn-categoria {
                padding: 10px 18px;
                font-size: 0.95rem;
                min-width: 130px;
            }
            
            .admin-tabs {
                flex-wrap: wrap;
            }
            
            .grid-recetas {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .logo-premium {
                width: 80px;
                height: 80px;
                font-size: 1.6rem;
            }
            
            .logo-premium:after {
                width: 90px;
                height: 90px;
            }
            
            .menu-categorias {
                gap: 8px;
            }
            
            .btn-categoria {
                padding: 8px 14px;
                font-size: 0.85rem;
                min-width: 110px;
            }
            
            .grid-recetas {
                grid-template-columns: 1fr;
            }
            
            .modal-contenido, .admin-contenido, .login-contenido {
                padding: 20px;
            }
            
            .detalles-receta > div {
                min-width: 100%;
            }
            
            .form-row {
                flex-direction: column;
                gap: 12px;
            }
            
            .admin-receta-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .admin-receta-actions {
                align-self: flex-end;
            }
            
            .configuracion-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- BARRA DE ADMIN -->
    <div class="admin-bar">
        <button id="btn-admin-login" class="btn-admin">
            <i class="fas fa-user-cog"></i> Admin
        </button>
    </div>

    <!-- LOGIN -->
    <div id="login-panel" class="login-panel">
        <div class="login-contenido">
            <h2 class="gold-text" style="margin-bottom: 25px;">Acceso Administrativo</h2>
            <form id="login-form" class="admin-form">
                <div class="form-group">
                    <label for="login-usuario">Usuario</label>
                    <input type="text" id="login-usuario" class="form-control" placeholder="Ingresa tu usuario">
                </div>
                
                <div class="form-group">
                    <label for="login-password">Contrase√±a</label>
                    <input type="password" id="login-password" class="form-control" placeholder="Ingresa tu contrase√±a">
                </div>
                
                <div class="form-row">
                    <button type="submit" class="btn-gold">Iniciar Sesi√≥n</button>
                    <button type="button" id="btn-cerrar-login" class="btn-gold-outline">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ENCABEZADO -->
    <header class="container">
        <div id="logo-premium" class="logo-premium">
            <i class="fas fa-utensils"></i>
        </div>
        <h1 id="titulo-principal">ZONA TOTAL</h1>
        <p id="subtitulo-principal" class="subtitle">Colecci√≥n premium de recetas f√°ciles y organizadas.</p>
    </header>

    <main class="container">
        <!-- MEN√ö DE SUBCATEGOR√çAS -->
        <nav class="menu-categorias" id="menu-categorias">
            <!-- Las categor√≠as se cargar√°n din√°micamente -->
        </nav>

        <!-- SECCIONES DE CATEGOR√çAS -->
        <!-- Las secciones se crear√°n din√°micamente -->
        <div id="secciones-container"></div>
    </main>

    <!-- MODAL PARA RECETA DETALLADA -->
    <div id="modal-receta" class="modal">
        <div class="modal-contenido">
            <button class="cerrar-modal">&times;</button>
            <div id="modal-imagen" class="imagen-receta-grande">
                <span>Imagen de la receta</span>
            </div>
            <h2 id="modal-titulo" class="gold-text">T√≠tulo de la receta</h2>
            <p id="modal-descripcion" class="gold-accent">Descripci√≥n corta de la receta.</p>
            
            <div class="info-receta">
                <div id="modal-tiempo">‚è±Ô∏è Tiempo: 30 min</div>
                <div id="modal-porciones">üë• Porciones: 4 personas</div>
                <div id="modal-categoria">üìÅ Categor√≠a: Postres</div>
            </div>
            
            <div class="detalles-receta">
                <div>
                    <h3 class="gold-text">Ingredientes</h3>
                    <ul id="modal-ingredientes">
                        <li>Ingrediente 1</li>
                        <li>Ingrediente 2</li>
                    </ul>
                </div>
                <div>
                    <h3 class="gold-text">Preparaci√≥n</h3>
                    <ol id="modal-preparacion">
                        <li>Paso 1 de la preparaci√≥n</li>
                        <li>Paso 2 de la preparaci√≥n</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <!-- PANEL DE ADMINISTRACI√ìN -->
    <div id="admin-panel" class="admin-panel">
        <div class="admin-contenido">
            <div class="admin-header">
                <h2 class="admin-title gold-text">Panel de Administraci√≥n</h2>
                <button id="btn-cerrar-admin" class="btn-gold-outline">Cerrar Panel</button>
            </div>
            
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="recetas">üìã Recetas</button>
                <button class="admin-tab" data-tab="categorias">üìÇ Categor√≠as</button>
                <button class="admin-tab" data-tab="configuracion">‚öôÔ∏è Configuraci√≥n</button>
                <button class="admin-tab" data-tab="apariencia">üé® Apariencia</button>
            </div>
            
            <!-- PESTA√ëA RECETAS -->
            <div id="tab-recetas" class="tab-content active">
                <h3 class="gold-text">Agregar/Editar Receta</h3>
                <form id="form-receta" class="admin-form">
                    <input type="hidden" id="receta-id" value="">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="receta-titulo">T√≠tulo de la Receta *</label>
                            <input type="text" id="receta-titulo" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="receta-categoria">Categor√≠a *</label>
                            <select id="receta-categoria" class="form-control" required>
                                <option value="">Seleccione una categor√≠a</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="receta-descripcion">Descripci√≥n Corta *</label>
                        <textarea id="receta-descripcion" class="form-control" required></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="receta-tiempo">Tiempo de Preparaci√≥n *</label>
                            <input type="text" id="receta-tiempo" class="form-control" placeholder="Ej: 45 min" required>
                        </div>
                        <div class="form-group">
                            <label for="receta-porciones">Porciones *</label>
                            <input type="text" id="receta-porciones" class="form-control" placeholder="Ej: 4 personas" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="receta-ingredientes">Ingredientes * (separados por punto y coma)</label>
                        <textarea id="receta-ingredientes" class="form-control" placeholder="Ej: 200g de harina; 2 huevos; 100ml de leche" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="receta-preparacion">Preparaci√≥n * (pasos separados por punto y coma)</label>
                        <textarea id="receta-preparacion" class="form-control" placeholder="Ej: Mezclar todos los ingredientes; Hornear a 180¬∞C por 25 minutos" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="receta-imagen">Subir imagen desde tu ordenador</label>
                        <div class="file-upload">
                            <input type="file" id="receta-imagen" accept="image/*">
                            <label for="receta-imagen" class="file-upload-label">
                                <i class="fas fa-cloud-upload-alt"></i> Seleccionar archivo (m√°x. 500KB)
                            </label>
                        </div>
                        <img id="imagen-preview" class="imagen-preview" alt="Vista previa">
                    </div>
                    
                    <div class="form-group">
                        <label for="receta-imagen-url">O usar URL de imagen (RECOMENDADO para GitHub Pages)</label>
                        <input type="text" id="receta-imagen-url" class="form-control" 
                               placeholder="https://i.ibb.co/abc123/tu-imagen.jpg">
                        <small class="gold-accent">
                            üìå Recomendado: Sube im√°genes a 
                            <a href="https://imgbb.com" target="_blank" style="color:#D4AF37; text-decoration: underline;">imgbb.com</a> 
                            (gratis) y pega el enlace directo aqu√≠
                        </small>
                    </div>
                    
                    <div class="form-row">
                        <button type="submit" class="btn-gold">Guardar Receta</button>
                        <button type="button" id="btn-cancelar-edicion" class="btn-gold-outline">Cancelar Edici√≥n</button>
                    </div>
                </form>
                
                <h3 class="gold-text" style="margin-top: 30px;">Recetas Existentes</h3>
                <div id="admin-recetas-list" class="admin-recetas-list">
                    <!-- Lista de recetas se cargar√° aqu√≠ -->
                </div>
            </div>
            
            <!-- PESTA√ëA CATEGOR√çAS -->
            <div id="tab-categorias" class="tab-content">
                <h3 class="gold-text">Administrar Categor√≠as</h3>
                <form id="form-categoria" class="admin-form" style="max-width: 500px;">
                    <input type="hidden" id="categoria-id" value="">
                    
                    <div class="form-group">
                        <label for="categoria-nombre">Nombre de la Categor√≠a *</label>
                        <input type="text" id="categoria-nombre" class="form-control" placeholder="Ej: Postres" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="categoria-icono">Icono (emoji o texto)</label>
                            <input type="text" id="categoria-icono" class="form-control" placeholder="Ej: üç∞">
                        </div>
                        <div class="form-group">
                            <label for="categoria-color">Color Personalizado</label>
                            <input type="color" id="categoria-color" class="form-control" value="#D4AF37">
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-gold">Guardar Categor√≠a</button>
                </form>
                
                <h3 class="gold-text" style="margin-top: 30px;">Categor√≠as Existentes</h3>
                <div id="admin-categorias-list" class="admin-recetas-list">
                    <!-- Lista de categor√≠as se cargar√° aqu√≠ -->
                </div>
            </div>
            
            <!-- PESTA√ëA CONFIGURACI√ìN -->
            <div id="tab-configuracion" class="tab-content">
                <h3 class="gold-text">Configuraci√≥n General</h3>
                <div class="configuracion-grid">
                    <div class="config-item">
                        <h4 class="gold-text">Informaci√≥n del Sitio</h4>
                        <form id="form-config-sitio" class="admin-form">
                            <div class="form-group">
                                <label for="config-titulo">T√≠tulo del Sitio</label>
                                <input type="text" id="config-titulo" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="config-subtitulo">Subt√≠tulo</label>
                                <input type="text" id="config-subtitulo" class="form-control">
                            </div>
                            <button type="button" id="btn-guardar-config" class="btn-gold">Guardar Cambios</button>
                        </form>
                    </div>
                    
                    <div class="config-item">
                        <h4 class="gold-text">Logo del Sitio</h4>
                        <div class="form-group">
                            <label>Logo Actual</label>
                            <div id="logo-preview" class="logo-premium" style="margin: 10px auto; width: 70px; height: 70px; font-size: 1.5rem;">
                                <i class="fas fa-utensils"></i>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Cambiar Logo</label>
                            <div class="file-upload">
                                <input type="file" id="config-logo" accept="image/*">
                                <label for="config-logo" class="file-upload-label">
                                    <i class="fas fa-image"></i> Subir nuevo logo
                                </label>
                            </div>
                            <small class="gold-accent">Tama√±o recomendado: 200x200px</small>
                        </div>
                    </div>
                    
                    <div class="config-item">
                        <h4 class="gold-text">Credenciales de Acceso</h4>
                        <form id="form-config-credenciales" class="admin-form">
                            <div class="form-group">
                                <label for="config-usuario">Usuario Administrador</label>
                                <input type="text" id="config-usuario" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="config-password">Contrase√±a</label>
                                <input type="password" id="config-password" class="form-control">
                            </div>
                            <small class="gold-accent">Para cambiar la contrase√±a, modifica el valor y guarda</small>
                            <button type="button" id="btn-guardar-credenciales" class="btn-gold" style="margin-top: 10px;">Actualizar Credenciales</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- PESTA√ëA APARIENCIA -->
            <div id="tab-apariencia" class="tab-content">
                <h3 class="gold-text">Personalizar Apariencia</h3>
                <div class="configuracion-grid">
                    <div class="config-item">
                        <h4 class="gold-text">Colores Principales</h4>
                        <form id="form-config-colores" class="admin-form">
                            <div class="form-group">
                                <label for="config-color-dorado">Color Dorado Principal</label>
                                <input type="color" id="config-color-dorado" class="form-control" value="#D4AF37">
                            </div>
                            <div class="form-group">
                                <label for="config-color-fondo">Color de Fondo</label>
                                <input type="color" id="config-color-fondo" class="form-control" value="#0A0A0A">
                            </div>
                            <div class="form-group">
                                <label for="config-color-texto">Color de Texto</label>
                                <input type="color" id="config-color-texto" class="form-control" value="#FFFFFF">
                            </div>
                            <button type="button" id="btn-aplicar-colores" class="btn-gold">Aplicar Colores</button>
                        </form>
                    </div>
                    
                    <div class="config-item">
                        <h4 class="gold-text">Fuentes Tipogr√°ficas</h4>
                        <form id="form-config-fuentes" class="admin-form">
                            <div class="form-group">
                                <label for="config-fuente-titulos">Fuente para T√≠tulos</label>
                                <select id="config-fuente-titulos" class="form-control">
                                    <option value="Cinzel">Cinzel</option>
                                    <option value="Playfair Display">Playfair Display</option>
                                    <option value="Oswald">Oswald</option>
                                    <option value="Montserrat">Montserrat</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="config-fuente-texto">Fuente para Texto</label>
                                <select id="config-fuente-texto" class="form-control">
                                    <option value="Lora">Lora</option>
                                    <option value="Roboto">Roboto</option>
                                    <option value="Open Sans">Open Sans</option>
                                    <option value="Merriweather">Merriweather</option>
                                </select>
                            </div>
                            <button type="button" id="btn-aplicar-fuentes" class="btn-gold">Aplicar Fuentes</button>
                        </form>
                    </div>
                    
                    <div class="config-item">
                        <h4 class="gold-text">Vista Previa</h4>
                        <div style="background: rgba(30,30,30,0.7); padding: 15px; border: 1px solid rgba(212,175,55,0.3); margin-bottom: 10px;">
                            <h4 style="font-family: 'Cinzel', serif; color: #D4AF37; margin-bottom: 10px;">T√≠tulo de Ejemplo</h4>
                            <p style="font-family: 'Lora', serif; color: #C0C0C0; margin-bottom: 10px;">Este es un texto de ejemplo que muestra c√≥mo se ver√° el contenido con las fuentes seleccionadas.</p>
                            <button style="background: transparent; border: 2px solid #D4AF37; color: #D4AF37; padding: 6px 12px;">Bot√≥n de Ejemplo</button>
                        </div>
                        <button type="button" id="btn-restaurar-apariencia" class="btn-gold-outline">Restaurar Valores Predeterminados</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PIE DE P√ÅGINA -->
    <footer>
        <div class="container">
            <p id="texto-footer">Zona Total ¬© 2025</p>
            <p id="subtitulo-footer" class="gold-accent">Plataforma privada de contenido premium.</p>
        </div>
    </footer>

    <script>
        // SISTEMA COMPLETO DE ADMINISTRACI√ìN - VERSI√ìN ESTABLE PARA GITHUB PAGES
        
        // CLAVES PARA ALMACENAMIENTO LOCAL
        const STORAGE_KEYS = {
            RECETAS: 'zonaTotalRecetas',
            CATEGORIAS: 'zonaTotalCategorias',
            CONFIG: 'zonaTotalConfig',
            CREDENCIALES: 'zonaTotalCredenciales',
            APARIENCIA: 'zonaTotalApariencia',
            LOGO: 'zonaTotalLogo',
            SESSION: 'zonaTotalSession'
        };
        
        // CONFIGURACI√ìN POR DEFECTO
        const configDefault = {
            titulo: "ZONA TOTAL",
            subtitulo: "Colecci√≥n premium de recetas f√°ciles y organizadas.",
            footerTexto: "Zona Total ¬© 2025",
            footerSubtitulo: "Plataforma privada de contenido premium."
        };
        
        // APARIENCIA POR DEFECTO
        const aparienciaDefault = {
            colores: {
                dorado: "#D4AF37",
                fondo: "#0A0A0A",
                texto: "#FFFFFF"
            },
            fuentes: {
                titulos: "Cinzel",
                texto: "Lora"
            }
        };
        
        // CREDENCIALES POR DEFECTO
        const credencialesDefault = {
            usuario: "anelis",
            password: "94052348012"
        };
        
        // CATEGOR√çAS POR DEFECTO
        const categoriasDefault = [
            { id: 'postres', nombre: "Postres", icono: "üç∞", color: "#D4AF37", orden: 1 },
            { id: 'saladas', nombre: "Comidas Saladas", icono: "üç≤", color: "#D4AF37", orden: 2 },
            { id: 'bebidas', nombre: "Bebidas", icono: "ü•§", color: "#D4AF37", orden: 3 },
            { id: 'ensaladas', nombre: "Ensaladas", icono: "ü•ó", color: "#D4AF37", orden: 4 },
            { id: 'sopas', nombre: "Sopas y Cremas", icono: "üçõ", color: "#D4AF37", orden: 5 },
            { id: 'reposteria', nombre: "Reposter√≠a", icono: "üç™", color: "#D4AF37", orden: 6 }
        ];
        
        // RECETAS POR DEFECTO (con im√°genes de ejemplo de IMGBB)
        const recetasDefault = [
            {
                id: 1,
                titulo: "Tarta de Chocolate Intenso",
                descripcion: "Deliciosa tarta de chocolate negro con base de galleta y crema batida. Perfecta para ocasiones especiales.",
                tiempo: "60 min",
                porciones: "8 personas",
                categoria: "postres",
                ingredientes: ["200g de galletas digestive", "100g de mantequilla derretida", "300g de chocolate negro 70%", "200ml de nata para montar", "3 huevos", "100g de az√∫car", "Una pizca de sal"],
                preparacion: ["Triturar las galletas y mezclar con la mantequilla derretida. Presionar en el molde para formar la base.", "Derretir el chocolate a ba√±o mar√≠a o en microondas a potencia baja.", "Batir los huevos con el az√∫car hasta que espumen.", "Mezclar el chocolate derretido con la nata y luego incorporar a la mezcla de huevos.", "Verter sobre la base de galletas y hornear a 180¬∞C durante 25-30 minutos.", "Dejar enfriar completamente antes de desmoldar y servir."],
                imagen: "https://i.ibb.co/7vqXK3L/chocolate-cake.jpg",
                fechaCreacion: Date.now()
            },
            {
                id: 2,
                titulo: "Lasagna Tradicional Italiana",
                descripcion: "Capas de pasta, salsa bolo√±esa y bechamel gratinadas al horno.",
                tiempo: "120 min",
                porciones: "6 personas",
                categoria: "saladas",
                ingredientes: ["12 l√°minas de pasta para lasa√±a", "500g de carne picada mixta", "1 cebolla picada", "2 zanahorias picadas", "2 tallos de apio picados", "800g de tomate triturado", "100g de queso parmesano", "300g de mozzarella", "Para la bechamel: 50g mantequilla, 50g harina, 500ml leche"],
                preparacion: ["Sofre√≠r la cebolla, zanahoria y apio hasta que est√©n tiernos.", "A√±adir la carne y cocinar hasta que pierda el color rojo.", "Incorporar el tomate triturado y cocinar a fuego lento 45 minutos.", "Preparar la bechamel derritiendo la mantequilla, a√±adiendo harina y luego la leche poco a poco.", "Montar la lasa√±a alternando pasta, salsa bolo√±esa, bechamel y queso.", "Hornear a 180¬∞C durante 35-40 minutos hasta que est√© dorada."],
                imagen: "https://i.ibb.co/8c6TQyP/lasagna.jpg",
                fechaCreacion: Date.now() - 1000000
            },
            {
                id: 3,
                titulo: "Limonada de Fresa y Menta",
                descripcion: "Refrescante combinaci√≥n de lim√≥n, fresas y hojas de menta fresca.",
                tiempo: "15 min",
                porciones: "4 personas",
                categoria: "bebidas",
                ingredientes: ["8 limones", "300g de fresas", "Un pu√±ado de hojas de menta fresca", "100g de az√∫car (o al gusto)", "1 litro de agua fr√≠a", "Hielo al gusto"],
                preparacion: ["Exprimir los limones para obtener su jugo.", "Licuar las fresas con un poco de agua hasta obtener un pur√©.", "En una jarra grande, mezclar el jugo de lim√≥n, el pur√© de fresas y el az√∫car hasta disolver.", "A√±adir el agua fr√≠a y las hojas de menta ligeramente machacadas.", "Refrigerar por al menos 30 minutos antes de servir.", "Servir con hielo y decorar con una fresa y una hoja de menta."],
                imagen: "https://i.ibb.co/7yJwz3L/lemonade.jpg",
                fechaCreacion: Date.now() - 2000000
            }
        ];
        
        // FUNCIONES DE ALMACENAMIENTO SEGURO
        function obtenerDatos(clave, porDefecto) {
            try {
                if (typeof localStorage === 'undefined') {
                    console.warn('localStorage no disponible, usando datos por defecto');
                    return Array.isArray(porDefecto) ? [...porDefecto] : { ...porDefecto };
                }
                
                const datosGuardados = localStorage.getItem(clave);
                if (datosGuardados) {
                    const parsed = JSON.parse(datosGuardados);
                    if (parsed !== null && typeof parsed === 'object') {
                        return parsed;
                    }
                }
            } catch (e) {
                console.error('Error al cargar datos de ' + clave + ':', e);
            }
            return Array.isArray(porDefecto) ? [...porDefecto] : { ...porDefecto };
        }
        
        function guardarDatos(clave, datos) {
            try {
                if (typeof localStorage !== 'undefined') {
                    localStorage.setItem(clave, JSON.stringify(datos));
                    return true;
                }
            } catch (e) {
                console.error('Error al guardar datos en ' + clave + ':', e);
            }
            return false;
        }
        
        // CARGAR TODOS LOS DATOS
        let config = obtenerDatos(STORAGE_KEYS.CONFIG, configDefault);
        let categorias = obtenerDatos(STORAGE_KEYS.CATEGORIAS, categoriasDefault);
        let recetas = obtenerDatos(STORAGE_KEYS.RECETAS, recetasDefault);
        let credenciales = obtenerDatos(STORAGE_KEYS.CREDENCIALES, credencialesDefault);
        let apariencia = obtenerDatos(STORAGE_KEYS.APARIENCIA, aparienciaDefault);
        let session = obtenerDatos(STORAGE_KEYS.SESSION, { logueado: false });
        
        // REFERENCIAS A ELEMENTOS DEL DOM
        const loginPanel = document.getElementById('login-panel');
        const adminPanel = document.getElementById('admin-panel');
        const modal = document.getElementById('modal-receta');
        
        // ELEMENTOS DE LA P√ÅGINA PRINCIPAL
        const elementosPagina = {
            titulo: document.getElementById('titulo-principal'),
            subtitulo: document.getElementById('subtitulo-principal'),
            logo: document.getElementById('logo-premium'),
            footerTexto: document.getElementById('texto-footer'),
            footerSubtitulo: document.getElementById('subtitulo-footer'),
            menuCategorias: document.getElementById('menu-categorias'),
            seccionesContainer: document.getElementById('secciones-container')
        };
        
        // VARIABLES DE ESTADO
        let adminLogueado = session.logueado || false;
        let editandoRecetaId = null;
        let editandoCategoriaId = null;
        
        // SISTEMA DE IM√ÅGENES MEJORADO
        const sistemaImagenes = {
            esUrl: function(texto) {
                return texto && (texto.startsWith('http://') || texto.startsWith('https://') || texto.startsWith('//'));
            },
            
            esBase64: function(texto) {
                return texto && texto.startsWith('data:image');
            },
            
            mostrarImagen: function(elemento, imagen, titulo) {
                if (!imagen) {
                    elemento.innerHTML = `<div style="display: flex; align-items: center; justify-content: center; height: 100%; background: linear-gradient(135deg, #D4AF3720, transparent);">
                        <i class="fas fa-utensils" style="font-size: 3rem; color: #D4AF37;"></i>
                    </div>`;
                    return;
                }
                
                if (this.esUrl(imagen)) {
                    elemento.innerHTML = `<img src="${imagen}" alt="${titulo}" 
                        onerror="this.onerror=null; this.src=''; this.parentElement.innerHTML='<div style=\'display: flex; align-items: center; justify-content: center; height: 100%;\'><i class=\'fas fa-image\' style=\'font-size: 2rem; color: #666;\'></i></div>'">`;
                } else if (this.esBase64(imagen)) {
                    elemento.innerHTML = `<img src="${imagen}" alt="${titulo}">`;
                }
            },
            
            optimizarYConvertirImagen: function(file, callback) {
                if (!file) {
                    callback(null);
                    return;
                }
                
                if (!file.type.match('image.*')) {
                    alert('Por favor, sube solo im√°genes (JPG, PNG, GIF)');
                    callback(null);
                    return;
                }
                
                if (file.size > 500 * 1024) {
                    if (confirm('La imagen es muy grande (>500KB). ¬øQuieres optimizarla autom√°ticamente?')) {
                        this.optimizarTamanoImagen(file, callback);
                    } else {
                        alert('Por favor, sube una imagen menor a 500KB');
                        callback(null);
                    }
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    callback(e.target.result);
                };
                reader.onerror = function() {
                    alert('Error al leer la imagen');
                    callback(null);
                };
                reader.readAsDataURL(file);
            },
            
            optimizarTamanoImagen: function(file, callback) {
                const img = new Image();
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                img.onload = function() {
                    let width = img.width;
                    let height = img.height;
                    const maxWidth = 800;
                    
                    if (width > maxWidth) {
                        height = (height * maxWidth) / width;
                        width = maxWidth;
                    }
                    
                    canvas.width = width;
                    canvas.height = height;
                    
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    const imagenOptimizada = canvas.toDataURL('image/jpeg', 0.7);
                    callback(imagenOptimizada);
                };
                
                img.onerror = function() {
                    alert('Error al procesar la imagen');
                    callback(null);
                };
                
                img.src = URL.createObjectURL(file);
            }
        };
        
        // INICIALIZAR LA APLICACI√ìN
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Inicializando Zona Total...');
            inicializarLogo();
            aplicarConfiguracion();
            renderizarCategorias();
            renderizarRecetas();
            inicializarPanelAdmin();
            verificarSesion();
            inicializarEventListeners();
            console.log('Aplicaci√≥n inicializada correctamente');
        });
        
        // INICIALIZAR LOGO
        function inicializarLogo() {
            try {
                if (typeof localStorage !== 'undefined') {
                    const logoGuardado = localStorage.getItem(STORAGE_KEYS.LOGO);
                    if (logoGuardado && sistemaImagenes.esBase64(logoGuardado)) {
                        elementosPagina.logo.innerHTML = `<img src="${logoGuardado}" alt="Logo Zona Total" style="width: 100%; height: 100%; object-fit: cover;">`;
                        return;
                    }
                }
            } catch (e) {
                console.error('Error al cargar logo:', e);
            }
            elementosPagina.logo.innerHTML = '<i class="fas fa-utensils"></i>';
        }
        
        // VERIFICAR SESI√ìN ACTIVA
        function verificarSesion() {
            if (adminLogueado) {
                document.getElementById('btn-admin-login').innerHTML = '<i class="fas fa-user-cog"></i> Panel Admin';
            }
        }
        
        // APLICAR CONFIGURACI√ìN
        function aplicarConfiguracion() {
            if (config.titulo) elementosPagina.titulo.textContent = config.titulo;
            if (config.subtitulo) elementosPagina.subtitulo.textContent = config.subtitulo;
            if (config.footerTexto) elementosPagina.footerTexto.textContent = config.footerTexto;
            if (config.footerSubtitulo) elementosPagina.footerSubtitulo.textContent = config.footerSubtitulo;
            
            if (apariencia.colores) {
                const estilo = document.createElement('style');
                estilo.id = 'estilos-dinamicos';
                estilo.textContent = `
                    .gold-text, .titulo-categoria, .admin-title, .admin-tab.active, .titulo-receta {
                        color: ${apariencia.colores.dorado} !important;
                    }
                    .btn-gold {
                        background: linear-gradient(135deg, ${apariencia.colores.dorado}, ${oscurecerColor(apariencia.colores.dorado, 20)});
                    }
                    .btn-gold-outline, .btn-categoria, .btn-admin, .btn-ver-receta {
                        border-color: ${apariencia.colores.dorado};
                        color: ${apariencia.colores.dorado};
                    }
                    .btn-gold-outline:hover, .btn-categoria:hover, .btn-admin:hover, .btn-ver-receta:hover {
                        background-color: ${apariencia.colores.dorado};
                        color: ${apariencia.colores.fondo};
                    }
                    .tarjeta-receta:before {
                        background: ${apariencia.colores.dorado};
                    }
                    .titulo-categoria:after {
                        background: linear-gradient(to right, transparent, ${apariencia.colores.dorado}, transparent);
                    }
                `;
                
                const estilosAnteriores = document.getElementById('estilos-dinamicos');
                if (estilosAnteriores) {
                    estilosAnteriores.remove();
                }
                
                document.head.appendChild(estilo);
            }
        }
        
        // FUNCI√ìN PARA OSCURECER COLOR
        function oscurecerColor(color, porcentaje) {
            try {
                let r = parseInt(color.slice(1, 3), 16);
                let g = parseInt(color.slice(3, 5), 16);
                let b = parseInt(color.slice(5, 7), 16);
                
                r = Math.floor(r * (100 - porcentaje) / 100);
                g = Math.floor(g * (100 - porcentaje) / 100);
                b = Math.floor(b * (100 - porcentaje) / 100);
                
                return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
            } catch (e) {
                return '#B8941F';
            }
        }
        
        // RENDERIZAR CATEGOR√çAS
        function renderizarCategorias() {
            console.log('Renderizando categor√≠as:', categorias.length);
            
            categorias.sort((a, b) => (a.orden || 999) - (b.orden || 999));
            
            elementosPagina.menuCategorias.innerHTML = '';
            elementosPagina.seccionesContainer.innerHTML = '';
            
            categorias.forEach(cat => {
                const enlace = document.createElement('a');
                enlace.href = `#${cat.id}`;
                enlace.className = 'btn-categoria';
                enlace.innerHTML = `${cat.icono || ''} ${cat.nombre}`;
                if (cat.color && cat.color !== "#D4AF37") {
                    enlace.style.borderColor = cat.color;
                    enlace.style.color = cat.color;
                }
                elementosPagina.menuCategorias.appendChild(enlace);
                
                const seccion = document.createElement('section');
                seccion.id = cat.id;
                seccion.className = 'seccion-categoria';
                
                const titulo = document.createElement('h2');
                titulo.className = 'titulo-categoria gold-text';
                titulo.innerHTML = `${cat.icono || ''} ${cat.nombre.toUpperCase()}`;
                if (cat.color && cat.color !== "#D4AF37") {
                    titulo.style.color = cat.color;
                }
                
                const contenedor = document.createElement('div');
                contenedor.className = 'grid-recetas';
                contenedor.id = `${cat.id}-container`;
                
                seccion.appendChild(titulo);
                seccion.appendChild(contenedor);
                elementosPagina.seccionesContainer.appendChild(seccion);
            });
        }
        
        // RENDERIZAR RECETAS
        function renderizarRecetas() {
            console.log('Renderizando recetas:', recetas.length);
            
            categorias.forEach(cat => {
                const contenedor = document.getElementById(`${cat.id}-container`);
                if (contenedor) contenedor.innerHTML = '';
            });
            
            recetas.sort((a, b) => (b.fechaCreacion || 0) - (a.fechaCreacion || 0));
            
            let recetasRenderizadas = 0;
            
            recetas.forEach(receta => {
                const categoria = categorias.find(c => c.id === receta.categoria);
                if (!categoria) {
                    console.warn('Receta sin categor√≠a v√°lida:', receta.titulo);
                    return;
                }
                
                const contenedor = document.getElementById(`${receta.categoria}-container`);
                if (!contenedor) {
                    console.warn('Contenedor no encontrado para categor√≠a:', receta.categoria);
                    return;
                }
                
                const tarjeta = crearTarjetaReceta(receta, categoria);
                contenedor.appendChild(tarjeta);
                recetasRenderizadas++;
            });
            
            console.log('Recetas renderizadas:', recetasRenderizadas);
            
            if (recetasRenderizadas === 0) {
                const primeraCategoria = categorias[0];
                if (primeraCategoria) {
                    const contenedor = document.getElementById(`${primeraCategoria.id}-container`);
                    if (contenedor) {
                        contenedor.innerHTML = `
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
                                <h3 class="gold-text">No hay recetas todav√≠a</h3>
                                <p class="gold-accent">Usa el Panel Admin para agregar tu primera receta</p>
                                <button id="btn-iniciar-admin" class="btn-gold" style="margin-top: 20px;">
                                    <i class="fas fa-user-cog"></i> Agregar Recetas
                                </button>
                            </div>
                        `;
                        
                        document.getElementById('btn-iniciar-admin').addEventListener('click', () => {
                            document.getElementById('btn-admin-login').click();
                        });
                    }
                }
            }
            
            actualizarListaRecetasAdmin();
        }
        
        // CREAR TARJETA DE RECETA
        function crearTarjetaReceta(receta, categoria) {
            const div = document.createElement('div');
            div.className = 'tarjeta-receta';
            div.dataset.id = receta.id;
            
            const colorCategoria = categoria?.color || '#D4AF37';
            
            let imagenHTML = '';
            if (receta.imagen) {
                imagenHTML = `<div class="imagen-receta" id="img-${receta.id}"></div>`;
            } else {
                imagenHTML = `<div class="imagen-receta" style="background: linear-gradient(135deg, ${colorCategoria}20, transparent);">
                    <i class="fas fa-utensils" style="font-size: 3rem; color: ${colorCategoria}"></i>
                </div>`;
            }
            
            div.innerHTML = `
                ${imagenHTML}
                <div class="contenido-receta">
                    <h3 class="titulo-receta" style="color: ${colorCategoria}">${receta.titulo}</h3>
                    <p class="descripcion-receta">${receta.descripcion}</p>
                    <button class="btn-ver-receta">Ver receta</button>
                </div>
            `;
            
            if (receta.imagen) {
                setTimeout(() => {
                    const imgElement = div.querySelector('.imagen-receta');
                    if (imgElement) {
                        sistemaImagenes.mostrarImagen(imgElement, receta.imagen, receta.titulo);
                    }
                }, 100);
            }
            
            div.querySelector('.btn-ver-receta').addEventListener('click', () => {
                mostrarRecetaModal(receta.id);
            });
            
            return div;
        }
        
        // MOSTRAR RECETA EN MODAL
        function mostrarRecetaModal(id) {
            const receta = recetas.find(r => r.id === id);
            if (!receta) {
                alert('Receta no encontrada');
                return;
            }
            
            const categoria = categorias.find(c => c.id === receta.categoria);
            
            document.getElementById('modal-titulo').textContent = receta.titulo;
            document.getElementById('modal-descripcion').textContent = receta.descripcion;
            document.getElementById('modal-tiempo').textContent = `‚è±Ô∏è Tiempo: ${receta.tiempo}`;
            document.getElementById('modal-porciones').textContent = `üë• Porciones: ${receta.porciones}`;
            document.getElementById('modal-categoria').textContent = `üìÅ Categor√≠a: ${categoria?.nombre || receta.categoria}`;
            
            const modalImagen = document.getElementById('modal-imagen');
            sistemaImagenes.mostrarImagen(modalImagen, receta.imagen, receta.titulo);
            
            const ingredientesList = document.getElementById('modal-ingredientes');
            ingredientesList.innerHTML = '';
            if (receta.ingredientes && Array.isArray(receta.ingredientes)) {
                receta.ingredientes.forEach(ingrediente => {
                    const li = document.createElement('li');
                    li.textContent = ingrediente;
                    ingredientesList.appendChild(li);
                });
            }
            
            const preparacionList = document.getElementById('modal-preparacion');
            preparacionList.innerHTML = '';
            if (receta.preparacion && Array.isArray(receta.preparacion)) {
                receta.preparacion.forEach(paso => {
                    const li = document.createElement('li');
                    li.textContent = paso;
                    preparacionList.appendChild(li);
                });
            }
            
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        // INICIALIZAR PANEL ADMIN
        function inicializarPanelAdmin() {
            console.log('Inicializando panel admin...');
            
            const selectCategoria = document.getElementById('receta-categoria');
            selectCategoria.innerHTML = '<option value="">Seleccione una categor√≠a</option>';
            categorias.forEach(cat => {
                const option = document.createElement('option');
                option.value = cat.id;
                option.textContent = cat.nombre;
                selectCategoria.appendChild(option);
            });
            
            document.getElementById('config-titulo').value = config.titulo || '';
            document.getElementById('config-subtitulo').value = config.subtitulo || '';
            document.getElementById('config-usuario').value = credenciales.usuario || '';
            document.getElementById('config-password').value = credenciales.password || '';
            
            if (apariencia.colores) {
                document.getElementById('config-color-dorado').value = apariencia.colores.dorado;
                document.getElementById('config-color-fondo').value = apariencia.colores.fondo;
                document.getElementById('config-color-texto').value = apariencia.colores.texto;
            }
            
            if (apariencia.fuentes) {
                document.getElementById('config-fuente-titulos').value = apariencia.fuentes.titulos;
                document.getElementById('config-fuente-texto').value = apariencia.fuentes.texto;
            }
            
            actualizarListaCategoriasAdmin();
            
            console.log('Panel admin inicializado');
        }
        
        // ACTUALIZAR LISTA DE RECETAS EN ADMIN
        function actualizarListaRecetasAdmin() {
            const lista = document.getElementById('admin-recetas-list');
            if (!lista) return;
            
            lista.innerHTML = '';
            
            if (recetas.length === 0) {
                lista.innerHTML = '<p class="gold-accent" style="text-align: center; padding: 20px;">No hay recetas agregadas todav√≠a.</p>';
                return;
            }
            
            recetas.forEach(receta => {
                const categoria = categorias.find(c => c.id === receta.categoria);
                const item = document.createElement('div');
                item.className = 'admin-receta-item';
                item.innerHTML = `
                    <div class="admin-receta-info">
                        <h4 class="gold-text">${receta.titulo}</h4>
                        <small class="gold-accent">${categoria?.nombre || receta.categoria} ‚Ä¢ ${receta.tiempo} ‚Ä¢ ${receta.porciones}</small>
                    </div>
                    <div class="admin-receta-actions">
                        <button class="btn-editar" data-id="${receta.id}">Editar</button>
                        <button class="btn-eliminar" data-id="${receta.id}">Eliminar</button>
                    </div>
                `;
                
                lista.appendChild(item);
            });
            
            document.querySelectorAll('#admin-recetas-list .btn-editar').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    cargarRecetaParaEditar(id);
                });
            });
            
            document.querySelectorAll('#admin-recetas-list .btn-eliminar').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    eliminarReceta(id);
                });
            });
        }
        
        // ACTUALIZAR LISTA DE CATEGOR√çAS EN ADMIN
        function actualizarListaCategoriasAdmin() {
            const lista = document.getElementById('admin-categorias-list');
            if (!lista) return;
            
            lista.innerHTML = '';
            
            categorias.forEach(cat => {
                const item = document.createElement('div');
                item.className = 'admin-receta-item';
                item.innerHTML = `
                    <div class="admin-receta-info">
                        <h4 class="gold-text">${cat.icono || ''} ${cat.nombre}</h4>
                        <small class="gold-accent">ID: ${cat.id} ‚Ä¢ Color: <span style="color: ${cat.color}">${cat.color}</span></small>
                    </div>
                    <div class="admin-receta-actions">
                        <button class="btn-editar" data-categoria="${cat.id}">Editar</button>
                        ${categorias.length > 1 ? `<button class="btn-eliminar" data-categoria="${cat.id}">Eliminar</button>` : ''}
                    </div>
                `;
                
                lista.appendChild(item);
            });
            
            document.querySelectorAll('#admin-categorias-list .btn-editar').forEach(btn => {
                btn.addEventListener('click', function() {
                    const catId = this.dataset.categoria;
                    cargarCategoriaParaEditar(catId);
                });
            });
            
            document.querySelectorAll('#admin-categorias-list .btn-eliminar').forEach(btn => {
                btn.addEventListener('click', function() {
                    const catId = this.dataset.categoria;
                    eliminarCategoria(catId);
                });
            });
        }
        
        // CARGAR RECETA PARA EDITAR
        function cargarRecetaParaEditar(id) {
            const receta = recetas.find(r => r.id === id);
            if (!receta) return;
            
            editandoRecetaId = id;
            
            document.getElementById('receta-id').value = id;
            document.getElementById('receta-titulo').value = receta.titulo;
            document.getElementById('receta-categoria').value = receta.categoria;
            document.getElementById('receta-descripcion').value = receta.descripcion;
            document.getElementById('receta-tiempo').value = receta.tiempo;
            document.getElementById('receta-porciones').value = receta.porciones;
            document.getElementById('receta-ingredientes').value = receta.ingredientes.join('; ');
            document.getElementById('receta-preparacion').value = receta.preparacion.join('; ');
            document.getElementById('receta-imagen-url').value = sistemaImagenes.esUrl(receta.imagen) ? receta.imagen : '';
            
            const preview = document.getElementById('imagen-preview');
            if (receta.imagen && sistemaImagenes.esBase64(receta.imagen)) {
                preview.src = receta.imagen;
                preview.style.display = 'block';
            } else {
                preview.style.display = 'none';
            }
            
            cambiarTab('recetas');
            document.getElementById('form-receta').scrollIntoView({ behavior: 'smooth' });
        }
        
        // CARGAR CATEGOR√çA PARA EDITAR
        function cargarCategoriaParaEditar(id) {
            const categoria = categorias.find(c => c.id === id);
            if (!categoria) return;
            
            editandoCategoriaId = id;
            
            document.getElementById('categoria-id').value = id;
            document.getElementById('categoria-nombre').value = categoria.nombre;
            document.getElementById('categoria-icono').value = categoria.icono || '';
            document.getElementById('categoria-color').value = categoria.color || '#D4AF37';
            
            cambiarTab('categorias');
        }
        
        // ELIMINAR RECETA
        function eliminarReceta(id) {
            if (!confirm('¬øEst√°s seguro de que deseas eliminar esta receta? Esta acci√≥n no se puede deshacer.')) {
                return;
            }
            
            const indice = recetas.findIndex(r => r.id === id);
            if (indice !== -1) {
                recetas.splice(indice, 1);
                guardarDatos(STORAGE_KEYS.RECETAS, recetas);
                renderizarRecetas();
                
                if (editandoRecetaId === id) {
                    cancelarEdicionReceta();
                }
                
                alert('Receta eliminada exitosamente');
            }
        }
        
        // ELIMINAR CATEGOR√çA
        function eliminarCategoria(id) {
            if (categorias.length <= 1) {
                alert('No puedes eliminar la √∫nica categor√≠a existente.');
                return;
            }
            
            const recetasEnCategoria = recetas.filter(r => r.categoria === id);
            if (recetasEnCategoria.length > 0) {
                alert(`No puedes eliminar esta categor√≠a porque tiene ${recetasEnCategoria.length} recetas asociadas. Primero mueve o elimina esas recetas.`);
                return;
            }
            
            if (!confirm('¬øEst√°s seguro de que deseas eliminar esta categor√≠a?')) {
                return;
            }
            
            const indice = categorias.findIndex(c => c.id === id);
            if (indice !== -1) {
                categorias.splice(indice, 1);
                guardarDatos(STORAGE_KEYS.CATEGORIAS, categorias);
                renderizarCategorias();
                actualizarListaCategoriasAdmin();
                
                const selectCategoria = document.getElementById('receta-categoria');
                selectCategoria.innerHTML = '<option value="">Seleccione una categor√≠a</option>';
                categorias.forEach(cat => {
                    const option = document.createElement('option');
                    option.value = cat.id;
                    option.textContent = cat.nombre;
                    selectCategoria.appendChild(option);
                });
                
                if (editandoCategoriaId === id) {
                    editandoCategoriaId = null;
                    document.getElementById('form-categoria').reset();
                }
                
                alert('Categor√≠a eliminada exitosamente');
            }
        }
        
        // CANCELAR EDICI√ìN DE RECETA
        function cancelarEdicionReceta() {
            editandoRecetaId = null;
            document.getElementById('form-receta').reset();
            document.getElementById('receta-id').value = '';
            document.getElementById('receta-imagen-url').value = '';
            document.getElementById('imagen-preview').style.display = 'none';
        }
        
        // CAMBIAR PESTA√ëA EN PANEL ADMIN
        function cambiarTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.admin-tab').forEach(btn => btn.classList.remove('active'));
            
            const tabElement = document.getElementById(`tab-${tabId}`);
            const tabButton = document.querySelector(`.admin-tab[data-tab="${tabId}"]`);
            
            if (tabElement) tabElement.classList.add('active');
            if (tabButton) tabButton.classList.add('active');
        }
        
        // INICIALIZAR EVENT LISTENERS
        function inicializarEventListeners() {
            console.log('Inicializando event listeners...');
            
            const btnAdminLogin = document.getElementById('btn-admin-login');
            if (btnAdminLogin) {
                btnAdminLogin.addEventListener('click', () => {
                    if (!adminLogueado) {
                        loginPanel.style.display = 'block';
                        document.body.style.overflow = 'hidden';
                    } else {
                        adminPanel.style.display = 'block';
                        document.body.style.overflow = 'hidden';
                    }
                });
            }
            
            const loginForm = document.getElementById('login-form');
            if (loginForm) {
                loginForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const usuario = document.getElementById('login-usuario').value;
                    const password = document.getElementById('login-password').value;
                    
                    if (usuario === credenciales.usuario && password === credenciales.password) {
                        adminLogueado = true;
                        session.logueado = true;
                        guardarDatos(STORAGE_KEYS.SESSION, session);
                        
                        if (btnAdminLogin) {
                            btnAdminLogin.innerHTML = '<i class="fas fa-user-cog"></i> Panel Admin';
                        }
                        
                        loginPanel.style.display = 'none';
                        adminPanel.style.display = 'block';
                        loginForm.reset();
                        alert('¬°Bienvenida Anelis!');
                    } else {
                        alert('Usuario o contrase√±a incorrectos');
                    }
                });
            }
            
            const btnCerrarLogin = document.getElementById('btn-cerrar-login');
            if (btnCerrarLogin) {
                btnCerrarLogin.addEventListener('click', () => {
                    loginPanel.style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
            }
            
            const btnCerrarAdmin = document.getElementById('btn-cerrar-admin');
            if (btnCerrarAdmin) {
                btnCerrarAdmin.addEventListener('click', () => {
                    adminPanel.style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
            }
            
            const cerrarModal = document.querySelector('.cerrar-modal');
            if (cerrarModal) {
                cerrarModal.addEventListener('click', () => {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
            }
            
            if (modal) {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
            }
            
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    cambiarTab(tabId);
                });
            });
            
            const formReceta = document.getElementById('form-receta');
            if (formReceta) {
                formReceta.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const id = editandoRecetaId || Date.now();
                    const titulo = document.getElementById('receta-titulo').value.trim();
                    const descripcion = document.getElementById('receta-descripcion').value.trim();
                    const tiempo = document.getElementById('receta-tiempo').value.trim();
                    const porciones = document.getElementById('receta-porciones').value.trim();
                    const categoria = document.getElementById('receta-categoria').value;
                    const ingredientes = document.getElementById('receta-ingredientes').value.split(';').map(i => i.trim()).filter(i => i);
                    const preparacion = document.getElementById('receta-preparacion').value.split(';').map(p => p.trim()).filter(p => p);
                    
                    if (!titulo || !descripcion || !tiempo || !porciones || !categoria || ingredientes.length === 0 || preparacion.length === 0) {
                        alert('Por favor completa todos los campos obligatorios (*)');
                        return;
                    }
                    
                    const fileInput = document.getElementById('receta-imagen');
                    const imagenUrl = document.getElementById('receta-imagen-url').value.trim();
                    const recetaExistente = recetas.find(r => r.id === id);
                    let imagenFinal = recetaExistente?.imagen || null;
                    
                    if (fileInput.files && fileInput.files[0]) {
                        sistemaImagenes.optimizarYConvertirImagen(fileInput.files[0], function(base64) {
                            guardarReceta(id, titulo, descripcion, tiempo, porciones, categoria, ingredientes, preparacion, base64);
                        });
                    } else if (imagenUrl) {
                        guardarReceta(id, titulo, descripcion, tiempo, porciones, categoria, ingredientes, preparacion, imagenUrl);
                    } else {
                        guardarReceta(id, titulo, descripcion, tiempo, porciones, categoria, ingredientes, preparacion, imagenFinal);
                    }
                });
            }
            
            document.getElementById('btn-cancelar-edicion').addEventListener('click', cancelarEdicionReceta);
            
            document.getElementById('receta-imagen').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const preview = document.getElementById('imagen-preview');
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            const formCategoria = document.getElementById('form-categoria');
            if (formCategoria) {
                formCategoria.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const id = editandoCategoriaId || document.getElementById('categoria-nombre').value.toLowerCase().replace(/\s+/g, '_');
                    const nombre = document.getElementById('categoria-nombre').value.trim();
                    const icono = document.getElementById('categoria-icono').value.trim();
                    const color = document.getElementById('categoria-color').value;
                    
                    if (!nombre) {
                        alert('Por favor ingresa un nombre para la categor√≠a');
                        return;
                    }
                    
                    const categoriaData = { 
                        id, 
                        nombre, 
                        icono, 
                        color,
                        orden: categorias.length + 1
                    };
                    
                    if (editandoCategoriaId) {
                        const indice = categorias.findIndex(c => c.id === id);
                        if (indice !== -1) {
                            categoriaData.orden = categorias[indice].orden;
                            categorias[indice] = categoriaData;
                        }
                    } else {
                        if (categorias.find(c => c.id === id)) {
                            alert('Ya existe una categor√≠a con ese nombre. Por favor usa un nombre diferente.');
                            return;
                        }
                        categorias.push(categoriaData);
                    }
                    
                    if (guardarDatos(STORAGE_KEYS.CATEGORIAS, categorias)) {
                        renderizarCategorias();
                        actualizarListaCategoriasAdmin();
                        
                        const selectCategoria = document.getElementById('receta-categoria');
                        selectCategoria.innerHTML = '<option value="">Seleccione una categor√≠a</option>';
                        categorias.forEach(cat => {
                            const option = document.createElement('option');
                            option.value = cat.id;
                            option.textContent = cat.nombre;
                            selectCategoria.appendChild(option);
                        });
                        
                        alert(editandoCategoriaId ? 'Categor√≠a actualizada exitosamente' : 'Categor√≠a agregada exitosamente');
                        
                        document.getElementById('form-categoria').reset();
                        editandoCategoriaId = null;
                    } else {
                        alert('Error al guardar la categor√≠a. Int√©ntalo de nuevo.');
                    }
                });
            }
            
            document.getElementById('btn-guardar-config').addEventListener('click', function() {
                config.titulo = document.getElementById('config-titulo').value.trim() || configDefault.titulo;
                config.subtitulo = document.getElementById('config-subtitulo').value.trim() || configDefault.subtitulo;
                
                if (guardarDatos(STORAGE_KEYS.CONFIG, config)) {
                    aplicarConfiguracion();
                    alert('Configuraci√≥n del sitio actualizada');
                } else {
                    alert('Error al guardar la configuraci√≥n');
                }
            });
            
            document.getElementById('btn-guardar-credenciales').addEventListener('click', function() {
                const nuevoUsuario = document.getElementById('config-usuario').value.trim();
                const nuevoPassword = document.getElementById('config-password').value.trim();
                
                if (!nuevoUsuario || !nuevoPassword) {
                    alert('Por favor ingresa un usuario y contrase√±a v√°lidos');
                    return;
                }
                
                credenciales.usuario = nuevoUsuario;
                credenciales.password = nuevoPassword;
                
                if (guardarDatos(STORAGE_KEYS.CREDENCIALES, credenciales)) {
                    alert('Credenciales actualizadas. Deber√°s iniciar sesi√≥n nuevamente.');
                    adminLogueado = false;
                    session.logueado = false;
                    guardarDatos(STORAGE_KEYS.SESSION, session);
                    adminPanel.style.display = 'none';
                    document.getElementById('btn-admin-login').innerHTML = '<i class="fas fa-user-cog"></i> Admin';
                } else {
                    alert('Error al actualizar las credenciales');
                }
            });
            
            document.getElementById('btn-aplicar-colores').addEventListener('click', function() {
                apariencia.colores = {
                    dorado: document.getElementById('config-color-dorado').value,
                    fondo: document.getElementById('config-color-fondo').value,
                    texto: document.getElementById('config-color-texto').value
                };
                
                if (guardarDatos(STORAGE_KEYS.APARIENCIA, apariencia)) {
                    aplicarConfiguracion();
                    alert('Colores aplicados exitosamente');
                } else {
                    alert('Error al guardar los colores');
                }
            });
            
            document.getElementById('btn-aplicar-fuentes').addEventListener('click', function() {
                apariencia.fuentes = {
                    titulos: document.getElementById('config-fuente-titulos').value,
                    texto: document.getElementById('config-fuente-texto').value
                };
                
                if (guardarDatos(STORAGE_KEYS.APARIENCIA, apariencia)) {
                    aplicarConfiguracion();
                    alert('Fuentes aplicadas exitosamente');
                } else {
                    alert('Error al guardar las fuentes');
                }
            });
            
            document.getElementById('btn-restaurar-apariencia').addEventListener('click', function() {
                if (confirm('¬øRestaurar la apariencia a los valores predeterminados? Se perder√°n los cambios personalizados.')) {
                    apariencia = { ...aparienciaDefault };
                    if (guardarDatos(STORAGE_KEYS.APARIENCIA, apariencia)) {
                        aplicarConfiguracion();
                        inicializarPanelAdmin();
                        alert('Apariencia restaurada a valores predeterminados');
                    }
                }
            });
            
            document.getElementById('config-logo').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    sistemaImagenes.optimizarYConvertirImagen(file, function(base64) {
                        if (base64) {
                            localStorage.setItem(STORAGE_KEYS.LOGO, base64);
                            
                            const logoDiv = document.getElementById('logo-premium');
                            logoDiv.innerHTML = `<img src="${base64}" alt="Logo Zona Total" style="width: 100%; height: 100%; object-fit: cover;">`;
                            
                            const logoPreview = document.getElementById('logo-preview');
                            logoPreview.innerHTML = `<img src="${base64}" alt="Logo Preview" style="width: 100%; height: 100%; object-fit: cover;">`;
                            
                            alert('Logo actualizado exitosamente');
                        }
                    });
                }
            });
            
            document.getElementById('logo-preview').addEventListener('click', function() {
                if (confirm('¬øRestaurar el logo por defecto?')) {
                    localStorage.removeItem(STORAGE_KEYS.LOGO);
                    elementosPagina.logo.innerHTML = '<i class="fas fa-utensils"></i>';
                    
                    const logoPreview = document.getElementById('logo-preview');
                    logoPreview.innerHTML = '<i class="fas fa-utensils"></i>';
                    
                    alert('Logo restaurado a valores predeterminados');
                }
            });
            
            console.log('Event listeners inicializados');
        }
        
        // FUNCI√ìN PARA GUARDAR RECETA
        function guardarReceta(id, titulo, descripcion, tiempo, porciones, categoria, ingredientes, preparacion, imagen) {
            const recetaData = {
                id,
                titulo,
                descripcion,
                tiempo,
                porciones,
                categoria,
                ingredientes,
                preparacion,
                imagen,
                fechaCreacion: Date.now()
            };
            
            if (editandoRecetaId) {
                const indice = recetas.findIndex(r => r.id === id);
                if (indice !== -1) {
                    recetas[indice] = recetaData;
                }
            } else {
                recetas.push(recetaData);
            }
            
            if (guardarDatos(STORAGE_KEYS.RECETAS, recetas)) {
                renderizarRecetas();
                alert(editandoRecetaId ? 'Receta actualizada exitosamente' : 'Receta agregada exitosamente');
                
                if (!editandoRecetaId) {
                    document.getElementById('form-receta').reset();
                }
                
                editandoRecetaId = null;
                document.getElementById('imagen-preview').style.display = 'none';
                document.getElementById('receta-imagen-url').value = '';
            } else {
                alert('Error al guardar la receta. Int√©ntalo de nuevo.');
            }
        }
        
        // INICIALIZACI√ìN ADICIONAL
        window.addEventListener('load', function() {
            console.log('P√°gina completamente cargada');
            
            setTimeout(() => {
                if (document.querySelectorAll('.tarjeta-receta').length === 0 && recetas.length > 0) {
                    console.log('Forzando re-renderizado...');
                    renderizarRecetas();
                }
            }, 1000);
        });
    </script>
</body>
</html>
